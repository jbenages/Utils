name: Test Actions                                  # workflow name

on:
  push:                                       
    branches:                                 # similar to "only" in GitLab
      - test_actions
env:
  AUTHTOKEN: ${{ secrets.AUTHTOKEN }}
  ZPUBLIC: ${{ secrets.ZPUBLIC }}
  ZSECRET: ${{ secrets.ZSECRET }}

jobs:
  build:
    runs-on: ubuntu-latest                    # similar to "image" in GitLab
    steps:
      - run: |
          sudo curl -s https://install.zerotier.com | sudo bash
          ls -lha /var/lib/zerotier-one/
          sudo cat /var/lib/zerotier-one/authtoken.secret
          echo ""
          sudo cat /var/lib/zerotier-one/identity.public
          echo ""
          sudo cat /var/lib/zerotier-one/identity.secret
          echo ""
          sudo zerotier-cli status
          systemctl stop zerotier-one
          sudo echo $AUTHTOKEN > /var/lib/authtoken.secret
          sudo echo $ZPUBLIC > /var/lib/identity.public
          sudo echo $ZSECRET > /var/lib/identity.secret
